
{% extends "base.html" %}
{% block content %}
	<h1>SPRINT BACKLOG - {{ project.title }}</h1>
	<ul class="nav nav-tabs" align="right">
		{% for s in all_sprint %}
		<li class="nav-item">
			{% if s.pk == sprint.pk %}
				<a class="nav-link active" href="{% url 'sprintBacklog-detail' project.slug s.pk %}">{{ s.title }}</a>
			{% else %}
				<a class="nav-link" href="{% url 'sprint-home' project.slug s.pk %}">{{ s.title }}</a>
			{% endif %}
		</li>
		{% endfor %}
		<li class="nav-item">
			<div class="btn-group" role="group" aria-label="Basic example">
			<a class="btn btn-outline-info" href="{% url 'sprintBacklog-create' project.slug %}">New Sprint</a>
				{% if PBI.all %}
				<a class="btn btn-outline-secondary" href="{% url 'sprintBacklog-include' project.slug sprint.pk%}">Include PBI</a>
				<a class="btn btn-outline-secondary" href="{% url 'sprintBacklog-select' project.slug sprint.pk%}">Select PBI</a>
				{% endif %}
			</div>
		</li>
	</ul>
	</br>

	<div class="container-fluid">
	<div class="card-group">
		<div class="col-sm card">
			<div class="card-body">
				<h5 class="card-title">Completed Effort</h5>
				<h4 class="card-text" style="text-align: right">{{ stat.completed }} hrs</h4>
			</div>
		</div>
		<div class="col-sm card">
			<div class="card-body">
				<h5 class="card-title">Available Effort</h5>
				<h4 class="card-text" style="text-align: right">{{ stat.available }} hrs</h4>
			</div>
		</div>
		<div class="col-sm card">
			<div class="card-body">
				<h5 class="card-title">Used Effort</h5>
				<h4 class="card-text" style="text-align: right">{{ stat.used }} hrs</h4>
			</div>
		</div>
		<div class="col-sm card">
			<div class="card-body">
				<h5 class="card-title">Remaining Effort</h5>
				<h4 class="card-text" style="text-align: right">{{ stat.remaining }} hrs</h4>
			</div>
		</div>		
	</div>
	</div>

	</br>
	<div class="container">
		<div class="row">
			<div class="col-md">
				<h6 class="text-muted">PBI</h6>
			</div>
			<div class="col-md">
				<h6 class="text-muted">To Do</h6>
			</div>
			<div class="col-md">
				<h6 class="text-muted">Doing</h6>
			</div>
			<div class="col-md">
				<h6 class="text-muted">Done</h6>
			</div>
		</div>
	</div>

	{% for t in task %}
	<div class="container">
		<div class="row">
			<div class="col-sm card">
				<div class="card-body d-flex flex-column">
					<a href="#"><h3 class="card-title">{{ t.pbi.title }}</h3></a>
					</br>
					<h5 class="card-text mt-auto" style="text-align: right">{{ t.finish }}/{{ t.not_finish }} hrs</h5>
					<a href="{% url 'task-create' project.slug sprint.pk t.pbi.pk %}" class="btn btn-outline-info btn-sm mt-auto">New Task</a>
				</div>
			</div>

			<div class="col-md">
			{% for i in t.todo %}
				<div class="card">
					<div class="card-body">
						<a href="#"><h5 class="card-title">{{ i.title }}</h5></a>
						<h6 class="card-subtitle mb-2 text-muted">{{ i.task_owner }}</h6>
						<p class="card-text" style="text-align: right;">{{ i.effort }} hrs</p>
					</div>
				</div class="card">
			{% endfor %}
			</div>

			<div class="col-md">
			{% for i in t.doing %}
				<div class="card">
					<div class="card-body">
						<a href="#"><h5 class="card-title">{{ i.title }}</h5></a>
						<h6 class="card-subtitle mb-2 text-muted">{{ i.task_owner }}</h6>
						<p class="card-text" style="text-align: right;">{{ i.effort }} hrs</p>
					</div>
				</div class="card">
			{% endfor %}
			</div>
			<div class="col-md">
			{% for i in t.done %}
				<div class="card">
					<div class="card-body">
						<a href="#"><h5 class="card-title">{{ i.title }}</h5></a>
						<h6 class="card-subtitle mb-2 text-muted">{{ i.task_owner }}</h6>
						<p class="card-text" style="text-align: right;">{{ i.effort }} hrs</p>
					</div>
				</div class="card">
			{% endfor %}
			</div>
		</div>
	</div>
	</br>
	{% endfor %}

{% endblock content %}
